<!DOCTYPE html>
<html>
<head>
  <title>test</title>
  <link href="css/ui-lightness/jquery-ui-1.10.3.custom.css" rel="stylesheet">
  <link href="rhyming_diagram.css?body=1" media="screen" rel="stylesheet" type="text/css">
	<script src="js/jquery-1.9.1.js"></script>
	<script src="js/jquery-ui-1.10.3.custom.js"></script>
</head>
<body>
	<div class="outer_container">
		<!-- <div class="syllable_container"> 
			<div class="chunk_container"> 
				<div class="chunk hidden"></div>
				<div class="chunk matcher"><input type="text" class="chunk_text" value=""></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>	
			<div class="chunk_container"> 
				<div class="chunk hidden"></div>
				<div class="chunk matcher"><input type="text" class="chunk_text" value=""></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>
			<div class="chunk_container"> 
				<div class="chunk hidden"></div>
				<div class="chunk matcher"><input type="text" class="chunk_text" value=""></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>
		</div>
		<div class="syllable_divider"></div> 
		<div class="multiple_syllable_container"> 
			<input class="end_syllable" type="button" value="<"></input>
			<input class="switcher" type="button" value=">"></input>
			<div class="num_syllables"><input type="text" class="num_syllables_text" value="5"></input></div>
			<div class="multi_syllables_text"> leading syllables </div>
		</div>
		<div class="syllable_divider"></div> --> 
		<div class="syllable_container"> 
			<div class="chunk_container"> 
				<div class="chunk hidden">k</div>
				<div class="chunk matcher blue"><input type="text" class="chunk_text" value="*"></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>	
			<div class="chunk_container"> 
				<div class="chunk hidden">ah0</div>
				<div class="chunk matcher blue"><input type="text" class="chunk_text" value="*"></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>
			<div class="chunk_container"> 
				<div class="chunk hidden"></div>
				<div class="chunk matcher blue"><input type="text" class="chunk_text" value="*"></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>
		</div>
		<div class="syllable_divider"></div> 
		<div class="syllable_container"> 
			<div class="chunk_container"> 
				<div class="chunk hidden">n</div>
				<div class="chunk matcher red"><input type="text" class="chunk_text" value="n"></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox"></input>
					<input class="match_box anti_matching" type="checkbox" checked="checked"></input>
				</div>
			</div>
			<div class="chunk_container"> 
				<div class="chunk hidden">eh1</div>
				<div class="chunk matcher green"><input type="text" class="chunk_text" value="eh1"></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox" checked="checked"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>
			<div class="chunk_container"> 
				<div class="chunk hidden">k</div>
				<div class="chunk matcher green"><input type="text" class="chunk_text" value="k"></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox" checked="checked"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>
		</div>
		<div class="syllable_divider"></div> 
		<div class="syllable_container"> 
			<div class="chunk_container"> 
				<div class="chunk hidden">sh</div>
				<div class="chunk matcher green"><input type="text" class="chunk_text" value="sh"></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox" checked="checked"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>
			<div class="chunk_container"> 
				<div class="chunk hidden">ah0</div>
				<div class="chunk matcher green"><input type="text" class="chunk_text" value="ah0"></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox" checked="checked"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>
			<div class="chunk_container">
				<div class="chunk hidden">n</div>
				<div class="chunk matcher green"><input type="text" class="chunk_text" value="n"></input></div>
				<div class="match_boxes">
					<input class="match_box matching" type="checkbox" checked="checked"></input>
					<input class="match_box anti_matching" type="checkbox"></input>
				</div>
			</div>
		</div>
	</div>
	<script>
		$(document).ready(function() {
			$(".chunk_text").each(function() {
				$(this).bind("propertychange keyup input paste", function(event) {
		      if ($(this).val()=="*") {
		      	$(this).parent(".chunk").removeClass("green");
		      	$(this).parent(".chunk").removeClass("red");
		      	$(this).parent(".chunk").addClass("blue");
		      	$(this).parent(".chunk").parent(".chunk_container").find(".match_boxes").find(".matching").removeAttr("checked");
		      	$(this).parent(".chunk").parent(".chunk_container").find(".match_boxes").find(".anti_matching").removeAttr("checked");
		      } else {
		      	$(this).parent(".chunk").removeClass("red");
		      	$(this).parent(".chunk").removeClass("blue");
		      	$(this).parent(".chunk").addClass("green");
		      }
				});
			});
			$(".match_box").click(function() {
				var chunk = $(this).parent(".match_boxes").parent(".chunk_container").find(".matcher");
				if (this.checked) {
					if ($(this).hasClass("matching")) {
						$(this).parent(".match_boxes").find(".anti_matching").removeAttr("checked");
		      	chunk.removeClass("red");
		      	chunk.removeClass("blue");
		      	chunk.addClass("green");
					} else {
						$(this).parent(".match_boxes").find(".matching").removeAttr("checked");
		      	chunk.removeClass("green");
		      	chunk.removeClass("blue");
		      	chunk.addClass("red");
					}
					if (chunk.find(".chunk_text").val()=="*") {
	      		var corresponding_chunk = chunk.parent(".chunk_container").find(".hidden").html();
	      		chunk.find(".chunk_text").val(corresponding_chunk);	
	      	}
				} else {
	      	chunk.removeClass("green");
	      	chunk.removeClass("red");
	      	chunk.addClass("blue");
	      	chunk.find(".chunk_text").val("*");
				}
			});
	  });
	</script>
</body>
</html>
